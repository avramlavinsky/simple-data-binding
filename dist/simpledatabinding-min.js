!function(){function e(t,n,r,a,o){var i=this,c=document;this.set=function(e,t,n,r,a){var o,c=i;if(e=f(e),r=r||"data",o=i.data[e],a){for(;void 0===o&&n!==!1&&c.parent;)c=c.parent,o=c[r][e];void 0===o?i[r][e]=t:c[r][e]=t}else i[r][e]=t;return i[r][e]},this.get=function(e,t,n){var r,a=i;for(e=f(e),n=n||"data",r=i[n][e];void 0===r&&t!==!1&&a.parent;)a=a.parent,r=a[n][e];return r},this.update=function(e,t){var n,r;t||z();for(var a in e)e.hasOwnProperty(a)&&(n=e[a],"object"==typeof n?n instanceof Array?l(a,n):i.createChild(a,O(a),n):(r=n,a=f(a),i.root.lastMutation={value:r,oldValue:i.get(a),prop:a},i.set(a,r),i.checkWatches(a)));return i.parseNode(i.container),i.checkWatches("*",!1),i.root.initialized&&q(),i.data},i.removeChild=function(e){return e.container.parentNode.removeChild(e.container),delete i.children[e.id],e.removed=!0,e};var l=function(e,t,n){var r,a,o,c,l,d,u,s=!1;if(i.childArrays[e]){for(o=i.childArrays[e],r=0,a=o.length;r<o.length;r++)i.removeChild(o[r]);o.length=0}else{if(c=n||O(e),!c)return null;o=i.configs.modifyInputArrays===!0?t:[],i.childArrays[e]=o,o.idIndex=0,o.ownerInstance=i,o.id=e,i.surroundByComments(o,"child array "+e,c)}for(s&&(l=i.childArrays[e].placeholderNode.parentNode,d=l.nextElementSibling,u=l.parentElement,u.removeChild(l)),r=0,a=t.length;r<a;r++)o[r]=i.createChildArrayMember(o,t[r]);return s&&(d?d.parentNode.insertBefore(l,d):u.appendChild(l)),i.arrayEnhancer&&!o.update&&i.arrayEnhancer.enhance(o),o};this.createChildArrayMember=function(t,n,r){if(n instanceof e)return n;var a=d(t,n),o=y(t.elementTemplate,r||t.placeholderNode),c=i.createChild(a,o,n);return c.containingArray=t,c};var d=function(e,t){var n=t.name||t.id||t.heading||t.label;return n&&!i.children[n]||(e.idIndex++,n=(n||e.id)+e.idIndex),n},u=Object.assign||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};this.createChild=function(t,n,r){var a,o=null;return a=i.cache.get(r),a&&n&&a.removed?(a.container=n,a.parseNode(n),o=a):o=new e(n,r,i.configs,t,i),i.children[t]=o,o};var s=function(e,t,n){var r,a=i.children,o=i.childArrays;if(n=n||(i.found=[])&&i,a[e]&&i.root.found.push(a[e]),o[e]&&i.root.found.push(o[e]),t||!i.root.length)for(r in a)a.hasOwnProperty(r)&&a[r].find(e,t,n);return t?i.root.found:i.root.found[0]};this.find=function(e){return s(e)},this.findAll=function(e){return s(e,!0)},this.export=function(e){var t=u({},i.data);e&&(t=N(t));for(var n in i.children)i.children.hasOwnProperty(n)&&i.children[n]&&(t[n]=i.children[n].export());return t};var p=function(e){return e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})},h=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},f=function(e){return i.nameSpace&&e&&e.substring(0,i.nameSpace.length)!==i.nameSpace&&(e=i.nameSpace+e.charAt(0).toUpperCase()+e.slice(1)),e},m=function(e){return(i.attrPrefix?h(i.attrPrefix)+"-":"")+e},v=function(e){return i.nameSpace?(e=e.substring(i.nameSpace.length),e.charAt(0).toLowerCase()+e.slice(1)):e},g=function(e){if(i.nameSpace)for(var t in e)t.substring(0,i.nameSpace.length)!==i.nameSpace&&(i.set(t,e[t]),delete e[t]);return e},N=function(e){if(i.nameSpace)for(var t in e)e.hasOwnProperty(t)&&(e[v(t)]=e[t],delete e[t]);return e},b=function(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)},y=function(e,t){var n=e.cloneNode(!0);return t.parentNode.insertBefore(n,t),n},S=function(e){var t;return"radio"===e.type?e.checked&&(t=e.value):"checkbox"===e.type?(t=i.get(e.name,!0),t=void 0!==t?t.split(i.checkboxDataDelimiter):[],e.checked?t.push(e.value):t.splice(t.indexOf(e.value),1),t=t.join(i.delimiter)):"OPTION"===e.tagName?(t=i.get(e.name,!0),t=void 0!==t?t.split(i.checkboxDataDelimiter):[],e.selected?t.push(e.value):t.splice(t.indexOf(e.value),1),t=t.join(i.delimiter)):t=e.value,t},A=function(){function e(e){if("undefined"!==e.name&&"radio"!==e.type&&"checkbox"!==e.type&&"OPTION"!==e.tagName){var t=e.getAttribute("value");t&&"{{"!==t.substr(0,2)&&i.set(e.name,S(e))}}var t,n="[name]";if("form"===i.container.tagName)for(var r in i.container.elements)i.container.elements.hasOwnProperty(r)&&e(i.container.elements[r]);else{t=Array.prototype.slice.call(i.container.querySelectorAll(n)),b(i.container,n)&&t.push(i.container);for(var a=0,o=t.length;a<o;a++)e(t[a])}return i.data},w=function(){return t&&(i.container=t.tagName?t:c.querySelector(t)),i.container||(i.container=a&&c.querySelector("["+m("databind")+'="'+a+'"]')||c.querySelector("["+m("databind")+"]")||c.forms[0]||c.body),i.container},O=function(e){var t=i.container.querySelector("["+m("databind")+'="'+e+'"]');return t},x=function(){var e=a||i.container.id||i.container.name||"binding-"+i.container.tagName+"-"+(new Date).getTime();return i.container.setAttribute("databind",e),e},C=function(){var e;return i.configs.useHiddenInput&&(e=c.createElement("input"),e.type="hidden",i.container.appendChild(e)),e};this.surroundByComments=function(e,t,n,r){return e.placeholderNode||(e.elementTemplate=n,e.placeholderNode=c.createComment("end "+t),n.placeholderNode=e.placeholderNode,n.parentNode.insertBefore(c.createComment("start "+t),n),n.nextElementSibling?n.parentNode.insertBefore(e.placeholderNode,n.nextElementSibling):n.parentNode.appendChild(e.placeholderNode),r||n.parentNode.removeChild(n)),e.placeholderNode},this.removeCommentedElements=function(e,t){for(;e.previousSibling&&8!==e.previousSibling.nodeType;)1!==e.previousSibling.nodeType||t&&null===e.previousSibling.getAttribute(t)?e=e.previousSibling:e.parentNode.removeChild(e.previousSibling);return e},this.parseNode=function(e){var t;if(e.parsed)return!1;if(3===e.nodeType)M(e);else if(1===e.nodeType){for(t=0;t<e.attributes.length;t++)E(e.attributes[t]);for(t=0;t<e.childNodes.length;t++)e.childNodes[t].hasAttribute&&e.childNodes[t].hasAttribute("databind")||i.parseNode(e.childNodes[t]);e.getAttribute("databind")&&setTimeout(function(){e.classList.remove("unparsed"),e.classList.add("parsed")},0)}return e.parsed=!0,e};var E=function(e){if("data-"!==e.nodeName.substr(0,5))return k(e),T(e),e},k=function(e){var t;return void 0===e.rawName&&("__"===e.nodeName.substr(-2,2)?(e.rawName=e.nodeName.slice(2,-2),e.originalEl=e.ownerElement,e.prevAttrName=e.nodeName):e.rawName=null),null!==e.rawName&&(t=B(f(p(e.rawName)),e),t!==e.prevAttrName&&(t&&e.originalEl.setAttribute(t,e.nodeValue),e.prevAttrName&&e.originalEl.removeAttribute(e.prevAttrName),e.prevAttrName=t)),t},T=function(e){var t,n,r=e.nodeName,a=i.attrMethods[r],o=e.ownerElement;return M(e,e.nodeValue),t=e.value||o&&o[e.name],"value"!==r||"radio"!==o.type&&"checkbox"!==o.type&&"OPTION"!==o.tagName||(n=o&&o.name,n||"OPTION"!==o.tagName||(n=o.parentNode.name),D(o,B(n,e,!1),n,"name")),a&&a.apply(i,[o,B(e.nodeValue,e),e.nodeValue,e.nodeName]),e},M=function(e){if(!e)return"";var t=void 0===e.nodeTemplate,n=e.nodeValue;return t&&("string"==typeof n&&n.indexOf("{{")!==-1?e.nodeTemplate=n:e.nodeTemplate=null),e.nodeTemplate&&(e.nodeValue=e.nodeTemplate.replace(/{{(.*?)}}/g,function(t){return B(t.slice(2,-2),e)})),e.nodeValue},P=function(e,t,n){if("this."===e.substr(0,5)){var r,a,o,c,l=e.indexOf("("),d=l>0&&e.slice(l+1,-1).split(","),u=e.substr(0,l===-1?e.length:l),s=i;for(r=u.split("."),o=1,c=r.length;o<c;o++)s&&(s=s[r[o]]);return"function"==typeof s?(a=function(){var e=[];for(o=0,c=d.length;o<c;o++)e[o]=B(d[o].trim(),t);return s.apply(i,e)},n!==!1&&i.watch(d,a),a):s}return null},B=function(e,t,n){if(!e)return e;var r,a,o="'"===e.substr(0,1)&&e.slice(1,-1),c=Number(e);return o?o:isNaN(c)?(r=P(e,t,n),r?a="function"==typeof r?r():r:(a=i.get(e,!0),n!==!1&&i.watch(e,t)),t&&"name"===t.nodeName&&a&&n!==!1&&i.watch(a,t),a):c};this.templateMaster=function(e){return function(t,n){var r;return n&&(i.templates[n]=i.templates[n]||c.getElementById(n),i.templates[n]&&(r=i.templates[n].cloneNode(!0),r.removeAttribute("id"),t.placeholderNode?(i.removeCommentedElements(t.placeholderNode),t.placeholderNode.parentNode.insertBefore(r,t.placeholderNode)):(e(t,r),i.surroundByComments(t,"template "+n,r,!0)),i.parseNode(r))),t}};var I,W=i.templateMaster(function(e,t){e.appendChild(t)}),V=function(e,t,n){return this.surroundByComments(e,"render if "+n,e,!0),t&&!e.parentElement?e.placeholderNode.parentNode.insertBefore(e,e.placeholderNode):!t&&e.parentElement&&e.parentElement.removeChild(e),e},D=function(e,t,n,r){return void 0!==t&&("radio"===e.type&&"name"===r?e.checked=t===e.value:"checkbox"===e.type&&"name"===r?e.checked=t.indexOf(e.value)!==-1:"SELECT"!==e.tagName||t?"OPTION"!==e.tagName||"value"!==r&&"name"!==r?e.value=t:e.selected=e.value&&t.indexOf(e.value)!==-1:setTimeout(function(){e.selectedIndex="-1"},0)),e},L=function(e){return I=new MutationObserver(H),i.container.addEventListener("change",U),e!==!1&&i.container.addEventListener("keyup",j),i===i.root&&(i.turnOnAllBindings(),setTimeout(function(){i.turnOnAllBindings()})),i},q=function(){return I&&I.observe(i.container,{attributes:!0,attributeOldValue:!0}),I};this.turnOnAllBindings=function(){q();for(var e in i.children)i.children.hasOwnProperty(e)&&i.children[e]&&i.children[e].turnOnAllBindings();return i};var z=function(){return I&&I.disconnect(),I},H=function(e){return e.forEach(function(e){if(e.target===(i.boundHiddenInput||i.container)){var t,n="data-",r=e.target.getAttribute(e.attributeName);e.attributeName.substr(0,n.length)===n&&r!==e.oldValue&&(t=p(e.attributeName.substr(n.length)),i.root.lastMutation={prop:t,value:r,oldValue:e.oldValue},i.checkWatches(t),i.checkWatches("*"))}}),e},j=function(e){var t=c.createEvent("HTMLEvents");return t.initEvent("change",!0,!1),e.target.dispatchEvent(t),t},U=function(e){var t=S(e.target),n=e.target.name;return e.stopPropagation(),!i.containingArray||void 0===i.parent.get(n)||"radio"!==e.target.type&&"checkbox"!==e.target.type?i.set(n,t,!0,"data",!0):i.parent.set(n,t,!0,"data",!0)};this.watch=function(e,t,n){var r,a,o=["*"];"string"==typeof e&&(e=[e]),e instanceof Array||(n=t,t=e,e=o),e=e||o,r=n?i.root:i,a=n?"globalScopeWatches":"watches";for(var c=0,l=e.length;c<l;c++)r[a][e[c]]=r[a][e[c]]||[],r[a][e[c]].indexOf(t)===-1&&r[a][e[c]].push(t);return r[n?"globalScopeWatches":"watches"]},this.checkWatches=function(e,t){function n(e,t){var n,r=t?i.root:i,a=t?"globalScopeWatches":"watches",o=r[a][e];if(o)for(var c=o.length-1;c>=0;c--)"function"==typeof o[c]?$(o[c]):(n=o[c],2===n.nodeType?E(n):M(n))}if(i.watches[e]&&(n(e,!1),n("*",!1),i.root.globalScopeWatches[e]&&n(e,!0),i.root.globalScopeWatches["*"]&&n("*",!0)),t!==!1)for(var r in i.children)i.children.hasOwnProperty(r)&&i.children[r]&&i.children[r].checkWatches(e);return e};var $=function(e){var t=i.root.lastMutation,n=[t.value,t.oldValue,t.prop];if(void 0!==i.get(t.prop))return e.apply(i,n)},_=function(){return i.configs=r||{},i.nameSpace="string"==typeof i.configs.nameSpace?i.configs.nameSpace:"",i.attrPrefix="string"==typeof i.configs.attrPrefix?i.configs.attrPrefix:"",i.container=w(),i.id=x(),i.boundHiddenInput=C(),i.watches=i.configs.watches||{},i.globalScopeWatches=i.configs.globalScopeWatches||{},i.checkboxDataDelimiter=i.configs.checkboxDataDelimiter||",",i.attrMethods=u({},i.configs.attrMethods||{}),i.attrMethods.name=D,i.attrMethods[m("renderif")]=V,i.attrMethods[m("childtemplate")]=W,i.templates=u({},i.configs.templates||{}),i.logic=u({},i.configs.logic||{}),i.cache=new WeakMap,i},Z=function(){return i.parent=o,i.parent?(i.ancestors=i.parent.ancestors.slice(),i.ancestors.push(o)):i.ancestors=[],i.root=i.ancestors[0]||i,i.children={},i.childArrays={},i},F=function(){return n&&i.parent&&i.parent.cache.set(n,i),i.data=g((i.boundHiddenInput||i.container).dataset),i.update(i.data),A(),i.update(n||{}),i};this.init=function(){return Z(),_(),F(),L(this.configs.keyUp),i.initialized=!0,this},this.init()}window.SimpleDataBinding=e}();